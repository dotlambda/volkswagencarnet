from volkswagencarnet.vw_connection import Connection
import volkswagencarnet.vw_const as const
from tests.credentials import username, password

from aiohttp import ClientSession
import pprint
import asyncio
import logging

logging.basicConfig(level=logging.DEBUG)

VW_USERNAME=username
VW_PASSWORD=password


async def main():
    """Main method."""
    async with ClientSession(headers={'Connection': 'keep-alive'}) as session:
        connection = Connection(session, VW_USERNAME, VW_PASSWORD)
        request_count = 0
        connection._session_logged_in = True
        connection._session_tokens["Legacy"] = dict()
        connection._session_tokens["Legacy"]["access_token"] = 'eyJraWQiOiI0ODEyODgzZi05Y2FiLTQwMWMtYTI5OC0wZmEyMTA5Y2ViY2EiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIwNjNkODdkMS1lNTc4LTRiNDMtOTEzNC1kY2YyNzVlNWQxOTAiLCJhdWQiOiJhMjRmYmE2My0zNGIzLTRkNDMtYjE4MS05NDIxMTFlNmJkYThAYXBwc192dy1kaWxhYl9jb20iLCJzY3AiOiJvcGVuaWQgcHJvZmlsZSBiYWRnZSBjYXJzIGRlYWxlcnMgdmluIiwiYWF0IjoiaWRlbnRpdHlraXQiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnZ3Z3JvdXAuaW8iLCJqdHQiOiJhY2Nlc3NfdG9rZW4iLCJleHAiOjE3MDE3NTkwNTEsImlhdCI6MTcwMTc1NTQ1MSwibGVlIjpbIlZPTEtTV0FHRU4iXSwianRpIjoiZDJiMGEwN2QtMjJlMS00ZjY3LTk3MWEtNjJhNjIzMDU1YjE5In0.VGwJoHlxy3FUqLIWGh82Lo0yxsJXf9gRBMDhqf8BqE4-de_myCzBdgwXVUgHMaDWIlvVArEXlGQhnvse7JArqgiYt0bjfaXhlZh8x2F8R9HcoLmKgqHoUJRyuUSq5LZyvzKgrw9k7FDmqgCRju8vZhvb3wRcmVZ89tirI9xvoyF65nCkMg_10nhRcEfu_JBf-8xNEZdMtgFg4zVCXYnckd9KrhCLmRvBc1bsTuaLnxrU56DD_yORMhmHBI39SXh0ME1bfL7Td2aadvIJJovA0KoEVdrKUOyCrmxb87Kam19OR36Um1zVe0GVGj4LPxf-NtQwSevBOQ4Px0Ti0iFvKORct4gj2bhKW8wOX7r8llLmALcCNToNYhUJSFAkqgMJWWk9fRu7Acn-RAcIF20tIe9KdO5yq3gkanqB1n2RoSNmoRl-C0ltjtdsc0peOz3U3wjxwFA3nSz7RndfY21rOTOfCq9yiFT0XO65dQ_w3_yH3UoMAArxYwR_0mJr4pC6EYmr92EHkn8WR3n9P6NAw0fFMzPNLoCszOCLNZvQND3abLmO4f0kw4mjJK9vZTFI2_JjAEKNE7hqXW_c9YzngTvltNLsHx67xZHql3ywMZvIYCrO_UfKA65NLdfmarYo32E0-EjonozwPaJPWGM-tKvwqlXJjHPpLRdHOU3SGNs'
        connection._session_tokens["Legacy"]["refresh_token"] = 'eyJraWQiOiI0ODEyODgzZi05Y2FiLTQwMWMtYTI5OC0wZmEyMTA5Y2ViY2EiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIwNjNkODdkMS1lNTc4LTRiNDMtOTEzNC1kY2YyNzVlNWQxOTAiLCJhdWQiOiJhMjRmYmE2My0zNGIzLTRkNDMtYjE4MS05NDIxMTFlNmJkYThAYXBwc192dy1kaWxhYl9jb20iLCJhY3IiOiJodHRwczovL2lkZW50aXR5LnZ3Z3JvdXAuaW8vYXNzdXJhbmNlL2xvYS0yIiwic2NwIjoib3BlbmlkIHByb2ZpbGUgYmFkZ2UgY2FycyBkZWFsZXJzIHZpbiIsImFhdCI6ImlkZW50aXR5a2l0IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS52d2dyb3VwLmlvIiwianR0IjoicmVmcmVzaF90b2tlbiIsImV4cCI6MTcxNzMwNzQ1MSwiaWF0IjoxNzAxNzU1NDUxLCJqdGkiOiJiMzEyM2IyMy04MDE0LTQ2MmMtYjEzNC01Mzk0ODFlNjQ1N2QifQ.K3Pb4wzqRAz9UIDtPFm8HA2iVNzBWf5ZL2_9U5tKwF1eawd8j3j8I1OBqhBVXuF6wAHlCckpDb99o6JVEC2KsdfJFMOkVj_84s5UKyHCXL-PZc0W-TSslaR9V0dH0TkAgffC3eP2wFlQOwjGKwxj1ljT_2i66oo-hj8TcjSAjeTAIcAu-ySWDL4MFb4vo4omdtAAXzOq677p9JTkP2CSpkkjELrmyjhXb-2zEQcLEZxLEy5eD01YwzhDVLPV_Kti2nYPjSASfgd9pTE0rkIpQdCSQJKpWF0XqYIlRM3RbNekeVTDxD4GK77X3LlEb_VXfuNHm9ETS02LiV2C9Qt79ol4MKVv6Ij9fF0fuAsVXbz7Ft3AH413bjy-rhuP6y8fY-wTf2MCplljmk4U9D2m0mZeAfKnRqv6Z_mUrpY-0bB9gN9pq9T5Mm7f29i1qZYDS5XDwar2muH50LwL3jQj6rtCVImTXpxN8Jlh7cuBIx3IRHjqskjBf0P_SwFhUNFkSzQPj56ib3Lle6HmzaosmWaWU9fyO2OR4rBR2PLfdQrDudTFeLKYwUUQEXbz5OwhsZt6G0woKYnpYneYDyYTewHvsltsnbGsn00bzEgob3552QK-IKIEYDS8ZwVCDkhhKfB66kyruvEBeP2dAEopDgNYR2jcxWtYlM0Tz6OuAVs'
        connection._session_tokens["Legacy"]["id_token"] = 'eyJraWQiOiI0ODEyODgzZi05Y2FiLTQwMWMtYTI5OC0wZmEyMTA5Y2ViY2EiLCJhbGciOiJSUzI1NiJ9.eyJhdF9oYXNoIjoibjNTRTY5b1Jac1VLaFZITzE1NHlzQSIsInN1YiI6IjA2M2Q4N2QxLWU1NzgtNGI0My05MTM0LWRjZjI3NWU1ZDE5MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnZ3Z3JvdXAuaW8iLCJqdHQiOiJpZF90b2tlbiIsImxlZSI6WyJWT0xLU1dBR0VOIl0sImF1ZCI6ImEyNGZiYTYzLTM0YjMtNGQ0My1iMTgxLTk0MjExMWU2YmRhOEBhcHBzX3Z3LWRpbGFiX2NvbSIsImFjciI6Imh0dHBzOi8vaWRlbnRpdHkudndncm91cC5pby9hc3N1cmFuY2UvbG9hLTIiLCJ1cGRhdGVkX2F0IjoxNjc2NDc5MzMxMDMzLCJhYXQiOiJpZGVudGl0eWtpdCIsImV4cCI6MTcwMTc1OTA1MSwiaWF0IjoxNzAxNzU1NDUxLCJqdGkiOiI2ZGQxYWE1Yy0wZWU4LTRlYTktOTY5Yi1jZjA5N2ZjOGViYzUiLCJlbWFpbCI6Im9saXZlckByYWhuZXIubWUifQ.d_3ySV9qle_rN-9wKhzEAa-RuHn0exsdzv7Ilrg2d8dcPfa7alzYAauIH-ZAM86x7O_F8G3fuTMnFK9tjCmhhhCQbvMfSuCQsId0rlyJIufNEwQZkzHXqYx2e8_zSRCDIZXD_uE3KHfe0vSKXEgfB2ijchgMdclkjF0W6TaDVBiaqKg9SX6IvSGcWS__aNcKBsi177GHq6WPDtuvaOdjFjS-AzwGq_ktcFvNpkkIy2Vfu3ZsYtetcupRQ03njKIX_c0O3_OBAducvue0YhuDeU-0gXZwtymyiDjcjYe8eLzNMMYGe9gU-IR10BZjWI7FM7QeRShg8vuNGAzxR4nyonhBct6KSKS66a0aIIQ2hqJYxhBe9yKpkCz5nlUkrY1r0TtVW1OfLYXwVaFaGdD_9rc4UVMMRVsA1jRK2REg1EyzT-mto0MfsTZG9Os49_wPYY4hBqwAXuHRFSvC3-Zt56IL--N2u9VCJU32l9t9rSL0iWnV8sVGZ2r800U4CWa42ycvT-CbPUGvQCMxtY2q3DltZe1D6yeKkxs5N0S24qc2TYuvEztwWCiE_bkd9ZPJeOAdTX3OORsgIeOjtdweyKBJ-zswjyj4c3JIAimwtu1b9sQnMzzqZdevtWkd3Ogh0VLX6uWaVzInHvmH96DePlcA1zm8PWnvgBdYAJ_78pQ'
        connection._session_tokens["identity"] = connection._session_tokens["Legacy"].copy()

        await connection.validate_tokens


if __name__ == "__main__":
    loop = asyncio.get_event_loop()
    # loop.run(main())
    loop.run_until_complete(main())